<!doctype html>
<html lang="ko"><head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Vega · Other Chart Types</title>
<style>
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;margin:24px;background:#0f1115;color:#e6edf3}
a{color:#58a6ff;text-decoration:none} a:hover{text-decoration:underline}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(420px,1fr));gap:16px}
.card{background:#161b22;border:1px solid #30363d;border-radius:10px;padding:12px;overflow:hidden;box-sizing:border-box}
.name{font-size:14px;margin-bottom:8px;color:#9da7b3}
.vis{width:100%;overflow:hidden}
.vis canvas,.vis svg{max-width:100%!important;display:block}
small{color:#8b949e}
</style>
<script src="https://cdn.jsdelivr.net/npm/vega@6"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
</head><body>
<h1>Vega · Other Chart Types</h1><p><a href="../index.html">← 전체 목록</a></p>
<div class="grid">
  <div class="card"><div class="name">heatmap</div><div id="v_heatmap" class="vis"></div></div>
  <div class="card"><div class="name">density-heatmaps</div><div id="v_density_heatmaps" class="vis"></div></div>
  <div class="card"><div class="name">parallel-coordinates</div><div id="v_parallel_coordinates" class="vis"></div></div>
  <div class="card"><div class="name">word-cloud</div><div id="v_word_cloud" class="vis"></div></div>
  <div class="card"><div class="name">beeswarm-plot</div><div id="v_beeswarm_plot" class="vis"></div></div>
  <div class="card"><div class="name">calendar-view</div><div id="v_calendar_view" class="vis"></div></div>
  <div class="card"><div class="name">packed-bubble-chart</div><div id="v_packed_bubble_chart" class="vis"></div></div>
</div>
<script>
const examples = ["heatmap", "density-heatmaps", "parallel-coordinates", "word-cloud", "beeswarm-plot", "calendar-view", "packed-bubble-chart"];

const BASE = "https://vega.github.io/vega/examples/";
const DATA_BASE = "https://vega.github.io/vega/data/";

function fixDataUrls(spec) {
  const walk = (node) => {
    if (!node || typeof node !== "object") return;
    if (Array.isArray(node)) { node.forEach(walk); return; }
    if (node.url && typeof node.url === "string" && !/^https?:\/\//.test(node.url)) {
      const u = node.url.replace(/^\//, "");
      node.url = u.startsWith("data/") ? DATA_BASE + u.slice(5) : BASE + u;
    }
    Object.values(node).forEach(walk);
  };
  walk(spec);
}

function scaleSpec(spec, cardWidth) {
  const origW = spec.width || 400;
  const origH = spec.height || 320;
  const scale = Math.min(1, (cardWidth - 24) / origW);
  spec.width = Math.round(origW * scale);
  spec.height = Math.round(origH * scale);
}

async function renderAll() {
  for (const id of examples) {
    const elId = "v_" + id.replace(/[^a-zA-Z0-9_]/g, "_");
    const el = document.getElementById(elId);
    if (!el) continue;
    const url = BASE + id + ".vg.json";
    try {
      const spec = await fetch(url).then(r => r.json());
      fixDataUrls(spec);
      const container = el.closest(".card");
      const cardWidth = container ? container.clientWidth : 420;
      scaleSpec(spec, cardWidth);
      await vegaEmbed(el, spec, { actions: true, renderer: "svg" });
    } catch(e) {
      el.innerHTML = `<pre style="color:#ff7b72;white-space:pre-wrap">render failed: ${e}</pre>`;
    }
  }
}
renderAll();
</script>
</body></html>
