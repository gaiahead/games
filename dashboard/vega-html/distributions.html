<!doctype html>
<html lang="ko"><head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Vega · Distributions</title>
<style>
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;margin:24px;background:#0f1115;color:#e6edf3}
a{color:#58a6ff;text-decoration:none} a:hover{text-decoration:underline}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(420px,1fr));gap:16px}
.card{background:#161b22;border:1px solid #30363d;border-radius:10px;padding:12px;overflow:hidden;box-sizing:border-box}
.name{font-size:14px;margin-bottom:8px;color:#9da7b3}
.vis{width:100%;overflow:hidden}
.vis canvas,.vis svg{max-width:100%!important;display:block}
small{color:#8b949e}
</style>
<script src="https://cdn.jsdelivr.net/npm/vega@6"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
</head><body>
<h1>Vega · Distributions</h1><p><a href="../index.html">← 전체 목록</a></p>
<div class="grid">
  <div class="card"><div class="name">top-k-plot</div><div id="v_top_k_plot" class="vis"></div></div>
  <div class="card"><div class="name">top-k-plot-with-others</div><div id="v_top_k_plot_with_others" class="vis"></div></div>
  <div class="card"><div class="name">histogram</div><div id="v_histogram" class="vis"></div></div>
  <div class="card"><div class="name">histogram-null-values</div><div id="v_histogram_null_values" class="vis"></div></div>
  <div class="card"><div class="name">dot-plot</div><div id="v_dot_plot" class="vis"></div></div>
  <div class="card"><div class="name">probability-density</div><div id="v_probability_density" class="vis"></div></div>
  <div class="card"><div class="name">box-plot</div><div id="v_box_plot" class="vis"></div></div>
  <div class="card"><div class="name">violin-plot</div><div id="v_violin_plot" class="vis"></div></div>
  <div class="card"><div class="name">binned-scatter-plot</div><div id="v_binned_scatter_plot" class="vis"></div></div>
  <div class="card"><div class="name">contour-plot</div><div id="v_contour_plot" class="vis"></div></div>
  <div class="card"><div class="name">wheat-plot</div><div id="v_wheat_plot" class="vis"></div></div>
  <div class="card"><div class="name">quantile-quantile-plot</div><div id="v_quantile_quantile_plot" class="vis"></div></div>
  <div class="card"><div class="name">quantile-dot-plot</div><div id="v_quantile_dot_plot" class="vis"></div></div>
  <div class="card"><div class="name">hypothetical-outcome-plots</div><div id="v_hypothetical_outcome_plots" class="vis"></div></div>
  <div class="card"><div class="name">time-units</div><div id="v_time_units" class="vis"></div></div>
</div>
<script>
const examples = ["top-k-plot", "top-k-plot-with-others", "histogram", "histogram-null-values", "dot-plot", "probability-density", "box-plot", "violin-plot", "binned-scatter-plot", "contour-plot", "wheat-plot", "quantile-quantile-plot", "quantile-dot-plot", "hypothetical-outcome-plots", "time-units"];

const BASE = "https://vega.github.io/vega/examples/";
const DATA_BASE = "https://vega.github.io/vega/data/";

function fixDataUrls(spec) {
  const walk = (node) => {
    if (!node || typeof node !== "object") return;
    if (Array.isArray(node)) { node.forEach(walk); return; }
    if (node.url && typeof node.url === "string" && !/^https?:\/\//.test(node.url)) {
      const u = node.url.replace(/^\//, "");
      node.url = u.startsWith("data/") ? DATA_BASE + u.slice(5) : BASE + u;
    }
    Object.values(node).forEach(walk);
  };
  walk(spec);
}

function scaleSpec(spec, cardWidth) {
  const origW = spec.width || 400;
  const origH = spec.height || 320;
  const scale = Math.min(1, (cardWidth - 24) / origW);
  spec.width = Math.round(origW * scale);
  spec.height = Math.round(origH * scale);
}

async function renderAll() {
  for (const id of examples) {
    const elId = "v_" + id.replace(/[^a-zA-Z0-9_]/g, "_");
    const el = document.getElementById(elId);
    if (!el) continue;
    const url = BASE + id + ".vg.json";
    try {
      const spec = await fetch(url).then(r => r.json());
      fixDataUrls(spec);
      const container = el.closest(".card");
      const cardWidth = container ? container.clientWidth : 420;
      scaleSpec(spec, cardWidth);
      await vegaEmbed(el, spec, { actions: true, renderer: "svg" });
    } catch(e) {
      el.innerHTML = `<pre style="color:#ff7b72;white-space:pre-wrap">render failed: ${e}</pre>`;
    }
  }
}
renderAll();
</script>
</body></html>
